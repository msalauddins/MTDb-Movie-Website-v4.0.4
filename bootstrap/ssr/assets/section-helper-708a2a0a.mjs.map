{"version":3,"file":"section-helper-708a2a0a.mjs","sources":["../../../common/resources/client/billing/billing-page/requests/use-cancel-subscription.ts","../../../common/resources/client/billing/billing-page/requests/use-resume-subscription.ts","../../../common/resources/client/ui/section-helper.tsx"],"sourcesContent":["import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n  delete?: boolean;\n}\n\nexport function useCancelSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => cancelSubscription(props),\n    onSuccess: (response, payload) => {\n      toast(\n        payload.delete\n          ? trans(message('Subscription deleted.'))\n          : trans(message('Subscription cancelled.')),\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction cancelSubscription({\n  subscriptionId,\n  ...payload\n}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/cancel`, payload)\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n}\n\nexport function useResumeSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => resumeSubscription(props),\n    onSuccess: () => {\n      toast(trans(message('Subscription renewed.')));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction resumeSubscription({subscriptionId}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/resume`)\n    .then(r => r.data);\n}\n","import {ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\n\nexport interface SectionHelperProps {\n  title?: ReactNode;\n  description?: ReactNode;\n  actions?: ReactNode;\n  color?: 'positive' | 'danger' | 'warning' | 'primary' | 'neutral' | 'bgAlt';\n  className?: string;\n  size?: 'sm' | 'md';\n  leadingIcon?: ReactNode;\n  onClose?: () => void;\n}\nexport function SectionHelper({\n  title,\n  description,\n  actions,\n  color = 'primary',\n  className,\n  size = 'md',\n  leadingIcon,\n  onClose,\n}: SectionHelperProps) {\n  return (\n    <div\n      className={clsx(\n        className,\n        'rounded-panel px-10 pb-10',\n        leadingIcon || onClose ? 'py-4' : 'py-10',\n        size === 'sm' ? 'text-xs' : 'text-sm',\n        color === 'positive' && 'bg-positive/focus',\n        color === 'warning' && 'bg-warning/focus',\n        color === 'danger' && 'bg-danger/focus',\n        color === 'primary' && 'bg-primary/focus',\n        color === 'neutral' && 'border bg',\n        color === 'bgAlt' && 'border bg-alt',\n      )}\n    >\n      {title && (\n        <div className=\"mb-4 flex items-center gap-6\">\n          {leadingIcon}\n          <div className=\"font-medium\">{title}</div>\n          {onClose ? (\n            <IconButton size=\"xs\" className=\"ml-auto\" onClick={() => onClose()}>\n              <CloseIcon />\n            </IconButton>\n          ) : null}\n        </div>\n      )}\n      {description && <div>{description}</div>}\n      {actions && <div className=\"mt-14\">{actions}</div>}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAkBO,SAAS,wBAAwB;AAChC,QAAA,EAAC,UAAS;AAChB,SAAO,YAAY;AAAA,IACjB,YAAY,CAAC,UAAmB,mBAAmB,KAAK;AAAA,IACxD,WAAW,CAAC,UAAU,YAAY;AAChC;AAAA,QACE,QAAQ,SACJ,MAAM,QAAQ,uBAAuB,CAAC,IACtC,MAAM,QAAQ,yBAAyB,CAAC;AAAA,MAAA;AAAA,IAEhD;AAAA,IACA,SAAS,CAAO,QAAA,mBAAmB,GAAG;AAAA,EAAA,CACvC;AACH;AAEA,SAAS,mBAAmB;AAAA,EAC1B;AAAA,EACA,GAAG;AACL,GAA+B;AACtB,SAAA,UACJ,KAAK,yBAAyB,cAAc,WAAW,OAAO,EAC9D,KAAK,CAAK,MAAA,EAAE,IAAI;AACrB;ACvBO,SAAS,wBAAwB;AAChC,QAAA,EAAC,UAAS;AAChB,SAAO,YAAY;AAAA,IACjB,YAAY,CAAC,UAAmB,mBAAmB,KAAK;AAAA,IACxD,WAAW,MAAM;AACf,YAAM,MAAM,QAAQ,uBAAuB,CAAC,CAAC;AAAA,IAC/C;AAAA,IACA,SAAS,CAAO,QAAA,mBAAmB,GAAG;AAAA,EAAA,CACvC;AACH;AAEA,SAAS,mBAAmB,EAAC,kBAA6C;AACjE,SAAA,UACJ,KAAK,yBAAyB,cAAc,SAAS,EACrD,KAAK,CAAK,MAAA,EAAE,IAAI;AACrB;ACjBO,SAAS,cAAc;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA,QAAQ;AAAA,EACR;AAAA,EACA,OAAO;AAAA,EACP;AAAA,EACA;AACF,GAAuB;AAEnB,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA,eAAe,UAAU,SAAS;AAAA,QAClC,SAAS,OAAO,YAAY;AAAA,QAC5B,UAAU,cAAc;AAAA,QACxB,UAAU,aAAa;AAAA,QACvB,UAAU,YAAY;AAAA,QACtB,UAAU,aAAa;AAAA,QACvB,UAAU,aAAa;AAAA,QACvB,UAAU,WAAW;AAAA,MACvB;AAAA,MAEC,UAAA;AAAA,QACC,SAAA,qBAAC,OAAI,EAAA,WAAU,gCACZ,UAAA;AAAA,UAAA;AAAA,UACA,oBAAA,OAAA,EAAI,WAAU,eAAe,UAAM,OAAA;AAAA,UACnC,UACC,oBAAC,YAAW,EAAA,MAAK,MAAK,WAAU,WAAU,SAAS,MAAM,QAAQ,GAC/D,UAAC,oBAAA,WAAA,CAAU,CAAA,EACb,CAAA,IACE;AAAA,QAAA,GACN;AAAA,QAED,eAAgB,oBAAA,OAAA,EAAK,UAAY,YAAA,CAAA;AAAA,QACjC,WAAW,oBAAC,OAAI,EAAA,WAAU,SAAS,UAAQ,SAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGlD;"}